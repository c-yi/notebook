(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{413:function(s,n,a){"use strict";a.r(n);var t=a(23),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"多表查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多表查询"}},[s._v("#")]),s._v(" 多表查询")]),s._v(" "),a("h2",{attrs:{id:"联合查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#联合查询"}},[s._v("#")]),s._v(" 联合查询")]),s._v(" "),a("p",[s._v("联合查询: union,是指将多个查询结果合并成一个结果显示\n联合查询是针对查询结果的合并(多条select语句合并)")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 联合查询语法 union默认是去重的\nselect 查询\n union 查询选项 [all distinct]\nselect 查询\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 创建一个新表\n\ncreate table t 42 like t 40:\n\ninsert into t_42 values (null,'犬夜叉','男',200,'神妖1班'),\n(null,'日暮戈薇','女',16,'现代1班'),\n(null,'桔梗','女',88,'法师1班'),\n(null,'弥勒','男',28,'法师2班'),\n(null,'珊瑚','女',20,'法师2班'),\n(null,'七宝','保密',15,'宠物1班'),\n(null,'杀生丸','男',220,'神妖1班'),\n(null,'铃','女',4,'现代1班'),\n(null,'钢牙','男',68,'神妖1班'),\n(null,'奈落','男',255,'神妖1班'),\n(null,'神乐','女',15,'神妖2班');\n\n# e.g union默认是去重的\nselect * from t_40\n union all \nselect * from t_42;\n\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("h3",{attrs:{id:"联合查询排序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#联合查询排序"}},[s._v("#")]),s._v(" 联合查询排序")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#对的是整个 union之后的结果\n1、将t_40和t_42表的结果使用年龄降序排序\nselect from t_40\nunion all\nselect from t_42\norder by age desc;\n\n# 2. 对每个表排序\n(select from t_40 order by age desc limit 99999)\nunion\n(select from t_42 order by age desc limit 99999);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h2",{attrs:{id:"连表查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连表查询"}},[s._v("#")]),s._v(" 连表查询")]),s._v(" "),a("p",[s._v("连接查询:join,将两张表依据某个条件进行数据拼接\njoin左右各一张表:join关键字左边的表叫左表,右边的表叫右表\n连接查询的结果都是记录会保留左右表的所有字段(字段拼接\n具体字段数据依据査询需求确定\n表字段冲突需要使用表别名和字段别名区分\n不同的连表有不同的连接方式,对于结果的处理也不尽相同\n连接查询不限定表的数量,可以进行多表连接,只是表的连接需要一个一个的连( A join B join C…)\n小结\n1、连接査询就是通过字段拼接,把两张表的记录变成一条记录:字段数量增加\n2、连接查询的目的是将分散在不同表的数据组合到一起,方便外部使用数据")]),s._v(" "),a("h3",{attrs:{id:"交叉连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#交叉连接"}},[s._v("#")]),s._v(" 交叉连接")]),s._v(" "),a("p",[s._v("交叉连接: cross join,不需要连接条件的连接\n交叉连接产生的结果就是笛卡尔积\n左表的每一条记录都会与右表的所有记录连接并保留\n交叉连接没有实际数据价值,只是丰富了连接査询的完整性")]),s._v(" "),a("h3",{attrs:{id:"内连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内连接"}},[s._v("#")]),s._v(" 内连接")]),s._v(" "),a("p",[s._v("内连接: inner join,将两张表根据指定的条件连接起来,严格连接"),a("br"),s._v("\n内连接是将一张表的每条记录去另外张表根据条件匹配")]),s._v(" "),a("ul",[a("li",[s._v("匹配成功:保留连接的数据")]),s._v(" "),a("li",[s._v("匹配失败:都不保留")])]),s._v(" "),a("p",[s._v("内连接语 法:"),a("code",[s._v("左表 join 右表 on 连接条件")])]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1、设计学生表和专业表:学生对专业多对一关系\n#学生表\ncreate table t_43(\n\tid int primary key auto_increment,\n\tname varchar(50) not null,\n\tcourse_no int\n)charset utf8;\n\ninsert into t_43 values (null, 'student1', 1),\n(null, 'student2', 1),\n(null, 'student3', 2),\n(null, 'student4', 3),\n(null, 'student5', 1),\n(null, 'student6', default);\n#专业表\ncreate table t_44(\n\tid int primary key auto_increment,\n\tname varchar (50) not null unique\n)charset utf8;\n\ninsert into t_44 values(null, 'Computer' ),(null, 'Software'),(null, 'Network');\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[s._v("2、获取已经选择了专业的学生信息,包括所选专业")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#学生和专业在两个表中,所以需要连表\n#学生必须有专业,而专业也必须存在,所以是内连接\n#连接条件:专业编号\n#两张表有两个字段冲突:id、name,所以需要使用别名\nselect t_43.*,t_44.name as course_name from t_43 inner join t_44 on t_43.course_no = t_44.id ;\n\n#表名的使用也可以使用别名\nselect s.*, C.name as c_name from t_43 as s inner join t_44 as  c on s.course_no = c.id;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"外连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#外连接"}},[s._v("#")]),s._v(" 外连接")]),s._v(" "),a("p",[s._v("外连接: outer join,是一种不严格的连接方式")]),s._v(" "),a("ul",[a("li",[s._v("外连接分为两种\n"),a("ul",[a("li",[s._v("左外连接(左连接): left join")]),s._v(" "),a("li",[s._v("右外连接(右连接): right join")])])]),s._v(" "),a("li",[s._v("外连接有主表和从表之分\n"),a("ul",[a("li",[s._v("左连接:在表为主表")]),s._v(" "),a("li",[s._v("右连接:右表为主表")])])]),s._v(" "),a("li",[s._v("外连接是"),a("strong",[s._v("将主表的记录去匹配从表的记录")]),s._v(" "),a("ul",[a("li",[s._v("匹配成功保留")]),s._v(" "),a("li",[s._v("匹配失败(全表):也保留, 只是从表字段置空")])])])]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1、查出所有的学生信息,包括所在班级(左连接)\n#主要数据是学生,而且是全部学生:外连接、且学生表是主表\nselect s.* ,c.name c_name from t_43 s left join t_44 c on s course_no = c.id;\n\n2、查出所有班级里的所有学生(右连接)\n#主表是班级\nselect s.* ,c.name c_name from t_43 s right join t_44 c on s course_no = c.id;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"自然连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自然连接"}},[s._v("#")]),s._v(" 自然连接")]),s._v(" "),a("p",[s._v("概念 自然连接: natural join,是一种自动寻找连接条件的连接查询")]),s._v(" "),a("p",[s._v("自然连接不是一种特殊的连接方式,而是一种自动匹配条件的连接")]),s._v(" "),a("ul",[a("li",[s._v("自然连接包含自然内连接和自然外连接\n"),a("ul",[a("li",[s._v("自然内连接: natural join")]),s._v(" "),a("li",[s._v("自然外连接: natural left/right join")])])]),s._v(" "),a("li",[s._v("自然连接条件匹配模式:自动寻找相同字段名作为连接条件(字段名相同)")])]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select * from t_43 natural join t_44;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"using-关键字"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-关键字"}},[s._v("#")]),s._v(" using 关键字")]),s._v(" "),a("p",[s._v("using关键字 : 连接查询时如果是同名字段作为连接条件, using可以代替on出现(比on更好)")]),s._v(" "),a("ul",[a("li",[s._v("using 是针对同名字段(using(id)===A.id=B.id)")]),s._v(" "),a("li",[s._v("using 关键字使用后会自动合并对应字段为一个")]),s._v(" "),a("li",[s._v("using 可以同时使用多个字段作为条件")])]),s._v(" "),a("p",[s._v("using 关键字用来简化同名条件字段的连接条件行为\nusing 关键字与自然连接相似,但是比自然连接灵活,可以指定有效的同名连接条件,忽略无效的同名字段")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select s.*, c.c_name from t_45 as s left join t_46 as c using(c_id);\nselect * from t_45 as s left join t_46 as c using(c_id);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);