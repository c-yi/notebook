(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{415:function(a,s,e){"use strict";e.r(s);var n=e(23),t=Object(n.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"用户管理和权限管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用户管理和权限管理"}},[a._v("#")]),a._v(" 用户管理和权限管理")]),a._v(" "),e("h2",{attrs:{id:"权限"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#权限"}},[a._v("#")]),a._v(" 权限")]),a._v(" "),e("p",[a._v("权限管理:对账号进行权限的支持与回收")]),a._v(" "),e("ul",[e("li",[a._v("账号创建之初除了登录是没有其他操作权限的")]),a._v(" "),e("li",[a._v("账号的管理通常需要配合权限的使用\n"),e("ul",[e("li",[a._v("赋权:给账号绑定相应的权限 "),e("code",[a._v("grant 权限列表 on 数据库|*.数据表丨* to 用户名@主机地址")])]),a._v(" "),e("li",[a._v("回收:将账号已有的权限回收 "),e("code",[a._v("revoke 权限列表 on 数据库|*.数据表|* from 用户名@主机地址")])]),a._v(" "),e("li",[a._v("刷新权限: "),e("code",[a._v("flush privileges")])]),a._v(" "),e("li",[a._v("查看权限: "),e("code",[a._v("show grants for 用户名@主机地址")])])])])]),a._v(" "),e("h2",{attrs:{id:"角色"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#角色"}},[a._v("#")]),a._v(" 角色")]),a._v(" "),e("h3",{attrs:{id:"创建角色"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建角色"}},[a._v("#")]),a._v(" 创建角色")]),a._v(" "),e("p",[a._v("1、创建用户角色,分配给具有同样权限的用户")]),a._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("#创建角色(角色与用户名很相似)\ncreate role developer, app_read, app_write;\n#给角色分配权限\ngrant all on db_2.* to developer;\ngrant select on db_2.* to app_read;\ngrant insert,update,delete on db_2.* to app_write;\n\n#创建用户,\ncreate user 'admin1' @'%' identified by '1234';\ncreate user 'admin2' @'%' identified by '1234';\ncreate user 'admin3' @'%' identified by '1234';\n\n#并分配角色给用户\ngrant developer to 'admin1'@'%';\ngrant app_read  to 'admin2'@'%','admin1'@'%';#允许批量给用户分配角色\ngrant app_write to 'admin3'@'%';\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br")])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[a._v("激活")]),a._v(" "),e("p",[a._v("虽然权限已经最终关联到用户,但是用户并不能真正使用权限,还需要权限分配者每次登陆服务器时激活角色")]),a._v(" "),e("p",[a._v("激活之后对应的用户需要退出之后重新登录才行")])]),a._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("set default role all to 用户名@主机地址; #一次只能激活一个角色\nset default role all to 'admin1';\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h3",{attrs:{id:"角色回收"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#角色回收"}},[a._v("#")]),a._v(" 角色回收")]),a._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# 回收角色权限或者角色\n#回收角色权限\nrevoke insert, delete on db_2.* from app_write;\n\n#回收角色\nrevoke developer from 'admin1'@'%';\n\n#删除角色\ndrop role app_read;\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);