(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{458:function(s,a,n){"use strict";n.r(a);var e=n(23),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"高级操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#高级操作"}},[s._v("#")]),s._v(" 高级操作")]),s._v(" "),n("h2",{attrs:{id:"新增"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#新增"}},[s._v("#")]),s._v(" 新增")]),s._v(" "),n("p",[s._v("学习目标:了解新增数据中一些高级的操作技巧,提升数据插入的效率问题、安全问题")]),s._v(" "),n("ul",[n("li",[s._v("批量插入")]),s._v(" "),n("li",[s._v("蠕虫复制")]),s._v(" "),n("li",[s._v("主键冲突\n"),n("ul",[n("li",[s._v("冲突更新")]),s._v(" "),n("li",[s._v("冲突替换")])])])]),s._v(" "),n("h3",{attrs:{id:"批量插入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#批量插入"}},[s._v("#")]),s._v(" 批量插入")]),s._v(" "),n("p",[s._v("目标:了解批量插入的语法,掌握批量插入的应用")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("批量插入:是一种优化数据逐条插入的方式")])]),s._v(" "),n("li",[n("p",[s._v("批量插入数据的语法与简单数据插入的语法差不多")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("批量插入分为两种")])]),s._v(" "),n("li",[n("p",[s._v("全字段批量插入")]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Insert into 表名 values(值列表1),(值列表2),(值列表N);\n# e.g 插入学生全字段成绩\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])])]),s._v(" "),n("p",[s._v("insert into t_30 values(null,'Tom','Computer', 90),(null, 'Lily', 'Computer', 92);")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n+ 部分字段批量插入(注意字段默认值)\n\n```mysql\nInsert into 表名 (字段列表) values(值列表1),(值列表2),,(值列表);\n# e.g 插入学生部分字段成绩\ninsert into t_30 (stu_name, course) values('Tony','English'),( 'Ray', 'Math');\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])])])]),s._v(" "),n("h3",{attrs:{id:"蠕虫复制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#蠕虫复制"}},[s._v("#")]),s._v(" 蠕虫复制")]),s._v(" "),n("blockquote",[n("p",[s._v("丰富表数据,")])]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Insert into 表名 [(字段列表)] select 字段列表 from 表名;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"主键冲突"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#主键冲突"}},[s._v("#")]),s._v(" 主键冲突")]),s._v(" "),n("p",[s._v("主键冲突:在数据进行插入时包含主键指定,而主键在数据表已经存在\n主键冲突的业务通常是发生在业务主键上(业务主键本身有业务意义)")]),s._v(" "),n("ul",[n("li",[s._v("主键冲突的解决方案\n"),n("ul",[n("li",[n("p",[s._v("忽略冲突:保留原始记录")]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("insert ignore into 表名 [(字段列表)] values (值列表)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("冲突更新:冲突后部分字段变成更新")]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#1、尝试新增 2.更新\ninsert into 表名 [(字段列表)] values(值列表) \n\ton duplicate key update 字段=新值 [字段=新值..];\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("冲突替换:先删除原有记录,后新增记录")]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("replace into 表名 [(字段列表)] values (值列表);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])])])]),s._v(" "),n("p",[n("strong",[s._v("冲突忽略")])]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 1. 用户名作为主键的用户注册(冲突不能覆盖): username, password, regime\ncreate table t_36(\n\t`username` varchar(50) primary key,\n\t`password` char(32) not null,\n\t`regime` int unsigned not null\n)charset utf8;\n\ninsert into t_36 values( 'username','password', '12345678')\n#冲突忽略\ninsert ignore into t_36 values(username,12345678, 12345678);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[n("strong",[s._v("冲突更新")])]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 2. 用户名作为主键的记录用户使用信息(不存在新增、存在则更新时间): username, logintime\ncreate table t_37(\n\tusername varchar (50) primary key,\n\tlogintime int unsigned\n)Charset utf8\n\ninsert into t_37 values('username',12345678);#当前时间戳\n# 冲突更新\ninsert into t_37 values('username', 12345678) \n  on duplicate key update 'logintime'= unix_timestamp();#当前时间戳\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[n("strong",[s._v("冲突替换")])]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 3. 用户名作为主键的记录用户使用信息(不存在新增,存在则更新全部):username,logintime,clientinfo\ncreate table t_38(\n\tusername varchar (50) primary key,\n\tlogintime int unsigned,\n\tclientinfo varchar(255) not null\n)charset utf8;\n#  先删除后新增 较多的字段更新,建议使用替换\nreplace into t_38 values(username, unix_timestamp(), '{iphone: uc}')\nreplace into t_38 values(username, unix_timestamp(), '{iphone: uc}')\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("忽略新数据: "),n("code",[s._v("insert ignore")]),n("br"),s._v("\n更新部分数据: "),n("code",[s._v("insert ... on duplicate key update")]),n("br"),s._v("\n全部替换: "),n("code",[s._v("replace into")])]),s._v(" "),n("h2",{attrs:{id:"查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查询"}},[s._v("#")]),s._v(" 查询")]),s._v(" "),n("h3",{attrs:{id:"查询选项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查询选项"}},[s._v("#")]),s._v(" 查询选项")]),s._v(" "),n("p",[s._v("查询选项是在 "),n("strong",[s._v("select")]),s._v("关键字之后,进行简单数据筛选 ,有两个互斥值"),n("br"),s._v(" "),n("strong",[s._v("all")]),s._v(" : 默认,表示保留所有记录"),n("br"),s._v(" "),n("strong",[s._v("distinct")]),s._v(" : 去重,重复的记录(所有字段都重复)")]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("create table t_39(\n\tid int primary key auto_increment,\n\tgoods_name varchar(50) not null,\n\tgoods_price decimal(10,2) default 0.00,\n\tgoods_color varchar(20),\n\tgoods_ weight int unsigned comment '重量,单位克'\n)charset utf8;\n\ninsert into t_39 values (null, mate10, 5499.00, 'blue', 320),\n\t\t\t\t\t\t(null,'mate10',5499.00,'gray',320),\n\t\t\t\t\t\t(null,'nokia3301',1299,'black',420);\n\t\t\t\t\t\t\n#考虑所有字段的去重(不含逻辑主键)\nselect distinct goods_name, goods_price, goods_color, goods_weight from t_39;\nselect goods_name, goods_price,goods_color,goods_weight from t_39;#保留所有\n\n#不考虑颜色去重\nselect distinct goods_name, goods_price, goods_weight from t_39; # 两条数据\nselect all goops_name, goods_price, goods_weight from t_39; # 三条数据\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h3",{attrs:{id:"别名"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#别名"}},[s._v("#")]),s._v(" 别名")]),s._v(" "),n("p",[s._v("使用")]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 少用 * ,减少服务器读取和网络传输压力\nselect * from 表名;\n\n# select 不仅仅是可以从表中得到数据 只要后面可以得到结果,都是正确的语法\n# @@是系统变量的前缀,后面跟变量名\nselect unix_timestamp, @@version;#获取当前系统时间戳,系统版本\n\n# 别名\nselect 字段名 as 别名 from tableName;\nselect 字段名 别名 from tableName;\n# 别名的作用\n- 字段冲突:多张表同时操作有同名字段(系统默认覆盖),想保留全部\n- 数据安全:对外提供数据不使用真实字段名字,安全\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h3",{attrs:{id:"数据源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据源"}},[s._v("#")]),s._v(" 数据源")]),s._v(" "),n("blockquote",[n("p",[s._v("from 关键字 后面就是数据的来源,如果是查询结果就必须起一个别名")])]),s._v(" "),n("h4",{attrs:{id:"子查询数据源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#子查询数据源"}},[s._v("#")]),s._v(" 子查询数据源")]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("select * from (select * from t_1,t_2) as 表别名; # 如果数据有冲突就查不出数据\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 如果有时候名字较长或者使用不方便,可以利用表别名\nselect from t 30 as t\n# 将 t_27 重命名为 t1 将 t_30 重命名为 t2,然后 查询t1 表中的所有字段,查询t2表中的 stu_name字段\nselect t1.*, t2.stu_name from t_27 as tl, t_30 t2;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"where子句"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#where子句"}},[s._v("#")]),s._v(" Where子句")]),s._v(" "),n("p",[s._v("对数据进行筛选 ,where 是在磁盘读取后,进入内存前进行筛选的,where 无法使用别名")]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("select stu_name as name from t_1 where name = 'Tom'; #错误\nselect stu_name as name from t_1 where stu_name = 'Tom'; #正确\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("比较运算符\n"),n("ul",[n("li",[s._v("< (小于)、> (大于)、=(等于)、>=(大于等于)、<=(小于等于)、<>(不等于)")]),s._v(" "),n("li",[s._v("between A and B:A和B之间(A小于B),包括A和B本身(数值比较)")]),s._v(" "),n("li",[s._v("in (数据1,数据2…数据N):在列举的数据之中")]),s._v(" "),n("li",[s._v("like 'pattern':像上面样的,用于字符串比较\n"),n("ul",[n("li",[s._v("单下划线,匹配对应位置的一个任意字符(ab_:ab开头+一个任意字符,匹配abc,ab1,但不能匹配abcd)")]),s._v(" "),n("li",[s._v("%:匹配当前位置(往后)任意数量任意字符(ab%:a开头+任意数量任意字符,匹配abc,ab1,abcd)")])])])])])]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 1、查询成绩不及格的所有学生信息\n# 成绩条件:成绩是数值,又是比大小,可以直接使用比较运算符\nselect from t_35 where score < 60:\n\n# 2、查询成绩在60-90间的学生信息工\n# 成绩条件:区间60到90,可以有两种解决方案\nselect from t_35 where score between 60 and 90;\nselect from t_35 where score  >= 60 and score =< 90;\n\n# 3、查询还没有成绩的学生\n#成绩条件:成绩为nu11,所以不能用比较符号查,只能使用isnu1实现\nselect from t_35 where score is null\n\n# 查看名字 以 tom 开头的学生成绩\nselect * from t_35 where name like 'tom%':\n\n\n# 查询 id 在 (1,2,3,4,5) 的数据\nselect * from t_35 where id in (1,2,3,4,5):\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("ul",[n("li",[s._v("逻辑运算符\n"),n("ul",[n("li",[s._v("and(逻辑与)、or(逻辑或)、not(逻辑非)")])])]),s._v(" "),n("li",[s._v("null运算符\n"),n("ul",[n("li",[s._v("is null(为空)、 is not null(不为空)")])])])]),s._v(" "),n("h3",{attrs:{id:"group-by子句"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#group-by子句"}},[s._v("#")]),s._v(" group by子句")]),s._v(" "),n("p",[s._v("group by子句:分组统计,根据某个字段将所有的结果分类,并进行数据统计分析")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("分组的目的不是为了显示数据,一定是为了统计数据")])]),s._v(" "),n("li",[n("p",[s._v("group by子句一定是出现在 where子句之后(如果同时存在)")])]),s._v(" "),n("li",[n("p",[s._v("分组统计可以进行统计细分:先分大组,然后大组分小组")])])]),s._v(" "),n("h4",{attrs:{id:"聚合函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#聚合函数"}},[s._v("#")]),s._v(" 聚合函数")]),s._v(" "),n("p",[s._v("分组统计需要使用统计函数")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("group-concat( )")]),s._v(" : 将组里的某个字段全部保留")]),s._v(" "),n("li",[n("strong",[s._v("any-value( )")]),s._v(" : 不属于分组字段的任意一个组里的值")]),s._v(" "),n("li",[n("strong",[s._v("count( )")]),s._v(" : 求对应分组的记录数量")]),s._v(" "),n("li",[n("strong",[s._v("count(字段名)")]),s._v(" : 统计某个字段值的数量(NULL不统计)")]),s._v(" "),n("li",[n("strong",[s._v("count(*)")]),s._v(" : 统计整个记录的数量(较多)")]),s._v(" "),n("li",[n("strong",[s._v("sum( )")]),s._v(" : 求对应分组中某个字段是和")]),s._v(" "),n("li",[n("strong",[s._v("max( ) / min( )")]),s._v(" : 求对应分组中某个字段的最大最小值")]),s._v(" "),n("li",[n("strong",[s._v("avg( )")]),s._v(" : 求对应分组中某个字段的平均值")])]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 创建班级表\ncreate table t_40(\n\tid int primary key auto_increment,\n\tname varchar(10) not null,\n\tgender enum('男','女','保密'),\n\tage tinyint unsigned not null,\n\tclass_name varchar(10) not null comment '班级名称'\n)charset utf8;\n\n# 插入数据\ninsert into t_40 values \n\t(null,'鸣人','男',18,'木叶1班'),\n\t(null,'佐助','男',18,'木叶1班'),\n\t(null,'佐井','男',19,'木叶2班'),\n\t(null,'大蛇丸','男',28,'木叶0班'),\n\t(null,'卡卡西','男',29,'木叶0班'),\n\t(null,'小樱','女',18,'木叶1班'),\n\t(null,'雏田','女',18,'木叶1班'),\n\t(null,'我爱罗','男',19,'木叶1班'),\n\t(null,'向日葵','女',6,'木叶10班'),\n\t(null,'博人','男',8,'木叶10班'),\n\t(null,'鼬','男',28,'木叶0班');\n\n# 统计每个班的人数\nselect count(*),class_name from t_40 group by class_name;\n\n# 多分组,统计每个班的男女人数\nselect count(*),class_name,gender from t_40 group by class_name,gender;\n\n# 统计每个班的人数,并统计班级学生的名字\nselect count(*),group_concat(name),class)name from t_40 group by class_name;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("h4",{attrs:{id:"回溯统计-用的并不多"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#回溯统计-用的并不多"}},[s._v("#")]),s._v(" 回溯统计(用的并不多)")]),s._v(" "),n("p",[s._v("回溯统计:在进行分组时(通常是多分组),每一次结果的回溯都进行一次汇总统计"),n("br"),s._v("\n回溯统计语法:在统计之后使用 with rollup")]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 多分组,统计每个班的男女人数\nselect count(*),class_name,gender from t_40 group by class_name,gender with rollup;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("1、回溯统计一般用在多字段分组中,用来统计各级分组的汇总数据"),n("br"),s._v("\n2、因为回溯统计会将对应的分组字段置空(不置空无法合并),所以回溯的数据还需要经过其他程序语言加工处\n理才能取出数据来")]),s._v(" "),n("h4",{attrs:{id:"分组排序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#分组排序"}},[s._v("#")]),s._v(" 分组排序")]),s._v(" "),n("p",[s._v("分组排序:在分组后统计结果时可以根据分组字段进行升序或者降序显示数据")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("默认的系统就会自动对分组结果根据分组字段进行升序排序")])]),s._v(" "),n("li",[n("p",[s._v("可以设定分组结果的排序方式")]),s._v(" "),n("ul",[n("li",[s._v("group by 字段名 [ASC] : 升序排序(默认)")]),s._v(" "),n("li",[s._v("group by 字段名 DESC : 降序排序")])])])]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 多分组,统计每个班的男女人数,并按照 性别降序排序\nselect count(*),class_name,gender from t_40 group by class_name,gender desc;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"having子句"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#having子句"}},[s._v("#")]),s._v(" having子句")]),s._v(" "),n("p",[s._v("having孑句:类似于 where子句,是用来进行条件筛选数据的")]),s._v(" "),n("p",[s._v("having子句本身是针对分组统计结果进行条件筛选的")]),s._v(" "),n("ul",[n("li",[s._v("having子句必须出现在 group by子句之后(如果同时存在)")]),s._v(" "),n("li",[s._v("having针对的数据是在内存里已经加载的数据")]),s._v(" "),n("li",[s._v("having几乎能做 where能做的所有事,但是 where却不一定\n"),n("ul",[n("li",[s._v("字段别名( Where针对磁盘数据,那时还没有)")]),s._v(" "),n("li",[s._v("统计结果( Where在 group by之前)")]),s._v(" "),n("li",[s._v("分组统计函数( having通常是针对 group by存在的)")])])])]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 不使用别名 多用了一次函数(效率降低)\nselect count(*) as count class_name, group_concat (name) from t_40 group by class_name\nhaving count(*)<3;\n\n# 使用别名\nselect count(*) as count class_name, group_concat (name) from t_40 group by class_name having count < 3;\n\n# 没办法,前面没统计,只能自己统计\nselect class_name, group_concat (name) from t_40 group by class_name having count(*)< 3;\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h3",{attrs:{id:"order-by子句"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#order-by子句"}},[s._v("#")]),s._v(" order by子句")]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 默认是是升序 asc \n# 1、单字段排序:给所有学生按照年纪大小升序排序\nselect from t_40 order by age;\nselect from t_40 order by age asc;\n# 2、多字段排序:先性别降序排序,然后按年龄升序排序\nselect from t_40 order by gender desc, age\nselect from t_40 order by gender desc, age asc;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h3",{attrs:{id:"limit子句"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#limit子句"}},[s._v("#")]),s._v(" limit子句")]),s._v(" "),n("p",[s._v("limit子句:限制数据的获取数量(记录数)")]),s._v(" "),n("ul",[n("li",[s._v("limit子句必须在 order by子句之后(如果同时存在)")]),s._v(" "),n("li",[s._v("limit限制数量的方式有两种\n"),n("ul",[n("li",[s._v("limit数量:限制获取的数量(不保证一定能获取到指定数量")]),s._v(" "),n("li",[s._v("limit起始位置数量:限制数据获取的位置以及数量(分页)")])])])]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("select select选项 字段列表 [别名] |* from数据源[别名] where子句 group by子句 having子句 order by子句 limit 子句;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"更新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#更新"}},[s._v("#")]),s._v(" 更新")]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("create table t_41(\n\tid int primary key auto_increment,\n\tusername varchar(50) not null unique,\n\tpassword char (32) not null,\n\taccount decimal (10, 2) default 0.00\n)charset utf8;\n\ninsert into t_41 values \n\t(null, 'usernamel','password', default),\n\t(null, 'usernamel','password', default),\n\t(null, 'usernamel','password', default),\n\t(null, 'usernamel','password', default);\n\t\n# 限制更新\nupdate t_41 set account = account+10 limit 3;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"删除"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#删除"}},[s._v("#")]),s._v(" 删除")]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 限制删除\n# 只删除一条\ndelete from t_41 where account = 0 limit 1;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("strong",[s._v("清空数据")])]),s._v(" "),n("div",{staticClass:"language-mysql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("truncate t_41;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);